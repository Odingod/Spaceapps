(function($){

'use strict';

var Field = function(fieldData){
	this.fieldData = fieldData;
	
	//Assume not
	this.mandatory = (this.fieldData && this.fieldData['field_mandatory']) ?
		(parseInt(this.fieldData['field_mandatory'],10) && true) : false;
};
Field.prototype.getData = function(){
	return this.fieldData;
};

//Should not get called...
Field.prototype.render = function(){
	return '<p>DO ME</p>';
};

Field.prototype.isHidden = function(){
	return (this.fieldData['field_hidden']) ? this.fieldData['field_hidden'] : false;
};

var DateField = function(fieldData){
	Field.call(this,fieldData);
};

DateField.prototype = new Field();
DateField.prototype.render = function(){
	var d = this.fieldData;
	
	var tD = new Date();
	var datestr = tD.getFullYear() + "-" + (tD.getMonth()+ 1) + "-" +  tD.getDate();

	return [
		'<div class="form-group"><label for="' + d['field_id'] + '" class="col-lg-2 control-label">' + d['field_label']+ '</label><div class="col-lg-10"><input value="' + datestr + '" name=\"' + d['field_id'] + '\" id=\"' + d['field_id'] + '\"/></div></div>'
	].join('');
	
	
	
};

var TimeField = function(fieldData){
	Field.call(this,fieldData);
};

TimeField.prototype = new Field();
TimeField.prototype.render = function(){
	var d = this.fieldData;
	
	var tD = new Date();
	
	var hours = tD.getHours();
	var minutes = tD.getMinutes();
	var seconds = tD.getSeconds();
	
	if (hours   < 10) {hours   = "0"+hours;}
    if (minutes < 10) {minutes = "0"+minutes;}
    if (seconds < 10) {seconds = "0"+seconds;}
	
	var timestr = hours + ":" + minutes + ":" +  seconds;
	return [
		'<div class="form-group"><label for="' + d['field_id'] + '" class="col-lg-2 control-label">' + d['field_label']+ '</label><div class="col-lg-10"><input value="' + timestr + '" name=\"' + d['field_id'] + '\" id=\"' + d['field_id'] + '\"/></div></div><br>'
	].join('');
};

var CoordinateField = function(fieldData){
	Field.call(this,fieldData);
};

CoordinateField.prototype = new Field();
CoordinateField.prototype.render = function(){
	var d = this.fieldData;
	navigator.geolocation.getCurrentPosition(GetLocation);
	return [
		'<div class="form-group"><label for="' + d['field_id'] + '" class="col-lg-2 control-label">' + d['field_label']+ '</label><div class="col-lg-10"><input name=\"' + d['field_id'] + '\" id=\"' + d['field_id'] + '\" maxlength=\"' + d['field_max_length'] + '\"/></div></div><br>'
	].join('');
};

var TextField = function(fieldData){
	Field.call(this,fieldData);
};

TextField.prototype = new Field();
TextField.prototype.render = function(){
	var d = this.fieldData;
	
	return [	
		'<div class="form-group"><label for="' + d['field_id'] + '" class="col-lg-2 control-label">' + d['field_label']+ '</label><div class="col-lg-10"><input name=\"' + d['field_id'] + '\" id=\"' + d['field_id'] + '\" maxlength=\"' + d['field_max_length'] + '\"/></div></div><br>'
	].join('');
};

var CheckBoxField = function(fieldData){
	Field.call(this,fieldData);
};

CheckBoxField.prototype = new Field();
CheckBoxField.prototype.render = function(){
	var d = this.fieldData;
	return [
		'<div class="form-group"><label for="' + d['field_id'] + '" class="col-lg-2 control-label">' + d['field_label']+ '</label><div class="col-lg-10"><input type="checkbox" name=\"' + d['field_id'] + '\" id=\"' + d['field_id'] + '\"/></div></div>'
	].join('');
};

var SelectField = function(fieldData){
	Field.call(this,fieldData);
};

SelectField.prototype = new Field();
SelectField.prototype.render = function(){
	var d = this.fieldData;
	
	var options;
	for (var key in d['values']){
		for (var key2 in d['values'][key]){
			options = options + '<option value=\"' + d['values'][key][key2]['value_id'] + '\">' + d['values'][key][key2]['value_name'] + '</option>';
	}
	}
	return [
		'<div class="form-group"><label for="' + d['field_id'] + '" class="col-lg-2 control-label">' + d['field_label']+ '</label><div class="col-lg-10"><select name=\"' + d['field_id'] + '">' + options + '</select></div></div><br>'
	].join('');
};

//Map field_type to a constructor
var constructorMapper = {
	'date' : DateField,
	'time' : TimeField,
	'coordinate': CoordinateField,
	'text': TextField,
	'checkbox': CheckBoxField,
	'select': SelectField
};

//Register the jQuery plugin
$.fn.formRenderer = function(conf){
	//conf.result = jQuery.parseJSON("{\"observation\":{\"field\":[{\"field_label\":\"Date\",\"field_id\":\"observation_date\",\"field_type\":\"date\",\"field_mandatory\":\"1\",\"field_info\":\"<p><strong>T\u00e4h\u00e4n ilmoitetaan<\/strong> se p\u00e4iv\u00e4m\u00e4\u00e4r\u00e4 ja kellonaika, jolloin alun perin n\u00e4it ilmi\u00f6n taivaalla. P\u00e4iv\u00e4m\u00e4\u00e4r\u00e4 on my\u00f6s valittavissa viereisest\u00e4 kalenterikuvakkeesta.<br \/><br \/><strong>Jos et ole varma<\/strong> min\u00e4 ajankohtana havaitsit, pyyd\u00e4mme ett\u00e4 ilmoitat sen ajankohdan mit\u00e4 pid\u00e4t todenn\u00e4k\u00f6isimp\u00e4n\u00e4 eli ns. parhaan arvauksen. T\u00e4ll\u00f6in olisi hyv\u00e4, ett\u00e4 kerrot ajankohdan ep\u00e4varmuudesta lis\u00e4\u00e4 vapaamuotoisen tekstin kent\u00e4ss\u00e4 eli havaintokertomuksessa. <br \/><br \/><strong>Mik\u00e4li havainnossasi<\/strong> on kyse on pitk\u00e4ll\u00e4 valotuksella otetusta t\u00e4htikuvasta, jota on saatettu valottaa jopa useina eri \u00f6in\u00e4, ilmoita ajankohdaksi viimeisin valotusajankohta.<\/p>\",\"field_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#observation_date\"},{\"field_label\":\"Observation start time\",\"field_id\":\"observation_start_time\",\"field_type\":\"time\",\"field_mandatory\":\"0\",\"field_info\":[]},{\"field_label\":\"Observation end time\",\"field_id\":\"observation_end_time\",\"field_type\":\"time\",\"field_mandatory\":\"0\",\"field_info\":[]},{\"field_label\":\"Observation coordinate\",\"field_id\":\"observation_coordinates\",\"field_type\":\"coordinate\",\"field_mandatory\":\"0\",\"field_info\":\"<p><strong>Kun napsautat hiirell\u00e4<\/strong> karttaa, j\u00e4rjestelm\u00e4 poimii automaattisesti valitsemasi paikan koordinaatit ja maa-alueilla yleens\u00e4 my\u00f6s kyseisen paikan nimen.\u00a0<\/p><p><strong>Jos ensimm\u00e4inen hiiren<\/strong> napsautus kartalla meni v\u00e4\u00e4r\u00e4\u00e4n paikkaan, voit siirt\u00e4\u00e4 paikanmerkki\u00e4 napsauttamalla uudestaan. Kartan suurentaminen kartan vasemmassa reunassa olevalla liukus\u00e4\u00e4timell\u00e4 tai hiiren keskirullalla auttaa paikan saamisessa tarkemmaksi.<\/p><p><strong>Jos jostain syyst\u00e4<\/strong> et halua antaa liian tarkasti havaintopaikkaasi, voit sijoittaa havaintopaikan merkin kartalla esimerkiksi l\u00e4himm\u00e4n pienen taajaman keskustaan. Yleens\u00e4 1-3 kilometrin tarkkuus riitt\u00e4\u00e4 havaintopaikan ilmoituksessa.\u00a0<\/p>\",\"field_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#observation_coordinates\"},{\"field_label\":\"Location\",\"field_id\":\"observation_location\",\"field_type\":\"text\",\"field_max_length\":\"100\",\"field_mandatory\":\"0\",\"field_info\":\"<p><strong>K\u00e4ytt\u00e4jien toivotaan<\/strong> ensin antavan havaintopaikan napsauttamalla se karttaan noin 1-3 kilometrin tarkkuudella mik\u00e4li mahdollista. T\u00e4ll\u00f6in alle ilmestyy automaattisesti kunnan tarkkuudella havaintopaikka, mik\u00e4li kyse on Suomen maa-alueilla tehdyst\u00e4 havainnosta.<\/p><p><strong>Google maps -karttasovellus<\/strong> ei tunnista kaikkia ulkomaisia havaintopaikkoja eik\u00e4 merell\u00e4 tehtyj\u00e4 havaintoja. N\u00e4iss\u00e4 tapauksissa olisi hyv\u00e4, ett\u00e4 kirjoitat t\u00e4h\u00e4n havaintopaikan.\u00a0<\/p><p><strong>Voit my\u00f6s kartan<\/strong> napsautuksen sijasta kirjoittaa havaintopaikan suoraan kunnan tarkkuudella \'Paikkakunnan nimi\' -kentt\u00e4\u00e4n. T\u00e4ll\u00f6in j\u00e4rjestelm\u00e4 sijoittaa havaintosi satunnaiseen paikkaan ko. kunnan keskustassa. Useimpia ilmi\u00f6it\u00e4 koskien t\u00e4m\u00e4kin on riitt\u00e4v\u00e4 ilmoitustarkkuus.<\/p><p><strong>Mik\u00e4li et tied\u00e4<\/strong>, mink\u00e4 kunnan alueella havaintosi on tehty, kuten esimerkiksi, jos olit liikkuvassa kulkuv\u00e4lineess\u00e4, pyyd\u00e4mme ett\u00e4 kuvailet sijaintisi vapaamuotoisesti. Esimerkiksi \'Kouvolan ja Mikkelin v\u00e4lill\u00e4\' tai \'Lentokoneessa It\u00e4meren yll\u00e4\'.<\/p>\",\"field_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#observation_location\"},{\"field_label\":\"Name\",\"field_id\":\"user_name\",\"field_type\":\"text\",\"field_max_length\":\"100\",\"field_mandatory\":\"0\",\"field_info\":\"<p><strong>Anna oikea nimi<\/strong> muodossa etunimi ja sukunimi. Havaintoja ei voida hyv\u00e4ksy\u00e4 nimimerkeilt\u00e4 tai vajailta nimilt\u00e4 (esim. K. Virtanen). Mik\u00e4li et halua, ett\u00e4 nimesi on n\u00e4kyvill\u00e4 internetiss\u00e4 havaintosi yhteydess\u00e4, voit ottaa rastin pois t\u00e4t\u00e4 kysyv\u00e4st\u00e4 kohdasta, joka on seuraavalla rivill\u00e4.<\/p>\",\"field_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#user_name\"},{\"field_label\":\"email address\",\"field_id\":\"user_email\",\"field_type\":\"text\",\"field_max_length\":\"100\",\"field_mandatory\":\"0\",\"field_info\":\"<p><strong>S\u00e4hk\u00f6postiosoitteen<\/strong> tulisi olla toimivassa perusmuodossa ilman ylim\u00e4\u00e4r\u00e4isi\u00e4 tekstej\u00e4, v\u00e4lily\u00f6ntej\u00e4 tai sulkeita. Esimerkiksi:james.t.kirk@gfail.com<\/p><p><strong>Jos haluat my\u00f6hemmin<\/strong> t\u00e4ydent\u00e4\u00e4, korjata tai poistaa havaintosi, t\u00e4m\u00e4 on mahdollista muokkauslinkin avulla. Muokkauslinkki l\u00e4hetet\u00e4\u00e4n antamaasi s\u00e4hk\u00f6postiosoitteeseen. Ilman toimivaa s\u00e4hk\u00f6postiosoitetta se ei p\u00e4\u00e4se perille.<strong>\u00a0 <\/strong><\/p>\",\"field_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#user_email\"},{\"field_label\":\"Phone number\",\"field_id\":\"user_phone\",\"field_type\":\"text\",\"field_max_length\":\"100\",\"field_mandatory\":\"0\",\"field_info\":\"<p><strong>Yhteystietosi eiv\u00e4t<\/strong> tule julkisesti n\u00e4kyville eik\u00e4 niit\u00e4 luovuteta kaupallisiin tarkoituksiin.<\/p><p><strong>Tutkimuksen kannalta <\/strong>erityisen arvokkaiden havaintojen yhteydess\u00e4 on t\u00e4rke\u00e4\u00e4, ett\u00e4 tutkijat tai Ursa voi ottaa yhteytt\u00e4 havaitsijaan kysy\u00e4kseen lis\u00e4tietoja tai valokuvia tai kiitt\u00e4\u00e4kseen havainnosta.<\/p><p><strong>S\u00e4hk\u00f6postiosoitteesi avulla <\/strong>voit itse my\u00f6hemmin hakea omat havaintosi j\u00e4rjestelm\u00e4n hakutoiminteella. S\u00e4hk\u00f6posti on parempi hakutapa kuin nimi, koska usealla havaitsijalla voi olla sama nimi.\u00a0 \u00a0<\/p><p><strong>Moni havaitsija <\/strong>on halunnut mahdollisuuden my\u00f6hemmin t\u00e4ydent\u00e4\u00e4 tai korjata havaintoaan. T\u00e4m\u00e4 on mahdollista muokkauslinkin avulla, joka l\u00e4hetet\u00e4\u00e4n antamaasi s\u00e4hk\u00f6postiosoitteeseen. Ilman toimivaa s\u00e4hk\u00f6postiosoitetta se ei p\u00e4\u00e4se perille.<strong>\u00a0 <br \/><\/strong><\/p>\",\"field_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#user_phone\"},{\"field_label\":\"Nimeni voi n\u00e4ky\u00e4 havaintoni yhteydess\u00e4\",\"field_id\":\"observation_public\",\"field_type\":\"checkbox\",\"field_mandatory\":\"0\",\"field_info\":\"<p><strong>Edell\u00e4 kirjoitettu nimesi<\/strong> ei tule n\u00e4kyviin internetiss\u00e4 havaintosi ja mahdollisten kuviesi yhteydess\u00e4, mik\u00e4li otat rastin pois t\u00e4st\u00e4 kohdasta. Jos otat rastin pois, havainnon nimikent\u00e4ss\u00e4 lukee internetiss\u00e4 \'Ei n\u00e4kyvill\u00e4\'. T\u00e4ll\u00f6in henkil\u00f6llisyytesi j\u00e4\u00e4 vain Ursan ja ilmi\u00f6n tutkijoiden tietoon.\u00a0<\/p><p><strong>Toivomme kuitenkin<\/strong>, ett\u00e4 mahdollisimman moni havaitsija sallii nimens\u00e4 olevan esill\u00e4 havaintonsa ja mahdollisten kuviensa yhteydess\u00e4. N\u00e4in menetellen noudatetaan t\u00e4rke\u00e4ksi koettua luonnontieteellisen havaitsemisen perinnett\u00e4.<\/p>\",\"field_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#observation_public\"},{\"field_label\":\"Observation title\",\"field_id\":\"observation_title\",\"field_type\":\"select\",\"field_mandatory\":\"1\",\"values\":{\"value\":[{\"value_id\":\"25\",\"value_name\":\"Aurora between clouds\"},{\"value_id\":\"474\",\"value_name\":\"Aurora  veil\"},{\"value_id\":\"475\",\"value_name\":\"Calm aurora arc\"},{\"value_id\":\"21\",\"value_name\":\"Calm aurora belt\"},{\"value_id\":\"22\",\"value_name\":\"Active aurora belt\"},{\"value_id\":\"476\",\"value_name\":\"Radial aurora\"},{\"value_id\":\"465\",\"value_name\":\"Over half of the sky aurora\"},{\"value_id\":\"24\",\"value_name\":\"Entire sky aurora\"}]},\"field_info\":[]},{\"field_label\":\"Havaintokertomus\",\"field_id\":\"observation_description\",\"field_type\":\"text\",\"field_max_length\":\"2500\",\"field_mandatory\":\"0\",\"field_info\":\"<p><strong>T\u00e4h\u00e4n voit kertoa<\/strong> vapaamuotoisesti ilmi\u00f6st\u00e4 ja sen n\u00e4kemisest\u00e4. Tilaa on 1200 merkki\u00e4. Esimerkiksi kuinka huomasit ilmi\u00f6n? Milt\u00e4 se n\u00e4ytti? (jne).<\/p><p><strong>Jos taivaanilmi\u00f6t eiv\u00e4t<\/strong> ole sinulle entuudestaan tuttuja, koeta kuvailla ilmi\u00f6t\u00e4 monipuolisesti. \u00a0<\/p><p><strong>Jos olet alan spesialisti<\/strong> toivomme, ett\u00e4 kirjoitat siten, ett\u00e4 havaintokertomus on edes suurimmalta osaltaan ymm\u00e4rrett\u00e4v\u00e4 uusille aiheesta kiinnostuneille. Olisi hyv\u00e4 jos v\u00e4ltt\u00e4isit harvojen k\u00e4yt\u00f6ss\u00e4 olevia termej\u00e4, slangia ja lyhenteit\u00e4. \u00a0<\/p><p><strong>Mik\u00e4li kirjoitat t\u00e4h\u00e4n<\/strong> vaikka vain parinkin lauseen mittaisen havaintokertomuksen ja liit\u00e4t havaintoosi v\u00e4hint\u00e4\u00e4n yhden kuvan, havainto p\u00e4\u00e4see julkaistuna havaintoj\u00e4rjestelm\u00e4n <a href=\'\/observations\/browse\/pics\/0\/observation_id\'>Kuvat ja kertomukset <\/a>-sivulle.<\/p>\",\"field_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#observation_description\"},{\"field_label\":\"Mink\u00e4 t\u00e4htiyhdistyksen j\u00e4sen olet? \",\"field_id\":\"observation_user_team\",\"field_type\":\"select\",\"field_mandatory\":\"0\",\"values\":{\"value\":[{\"value_id\":\"2\",\"value_name\":\"Castor, TTY, Tampere\"},{\"value_id\":\"3\",\"value_name\":\"Etel\u00e4-Karjalan nova\"},{\"value_id\":\"4\",\"value_name\":\"Etel\u00e4-Suomen kosmol. seura\"},{\"value_id\":\"5\",\"value_name\":\"Evij\u00e4rven taivastelijat\"},{\"value_id\":\"6\",\"value_name\":\"Hyvink\u00e4\u00e4n Polaris\"},{\"value_id\":\"7\",\"value_name\":\"Forssan Uranus\"},{\"value_id\":\"8\",\"value_name\":\"H\u00e4meenlinnan Vega\"},{\"value_id\":\"9\",\"value_name\":\"Joensuun Seulaset\"},{\"value_id\":\"10\",\"value_name\":\"Jyv\u00e4skyl\u00e4n Sirius\"},{\"value_id\":\"11\",\"value_name\":\"J\u00e4rvenp\u00e4\u00e4n nova\"},{\"value_id\":\"12\",\"value_name\":\"Kajaanin planeetta\"},{\"value_id\":\"13\",\"value_name\":\"Kattern\u00f6 skywatchers\"},{\"value_id\":\"14\",\"value_name\":\"Keski-Uudenmaan Altair\"},{\"value_id\":\"15\",\"value_name\":\"Kirkkonummen komeetta\"},{\"value_id\":\"16\",\"value_name\":\"Konut t\u00e4hlet, Jaala\"},{\"value_id\":\"17\",\"value_name\":\"Kuopion Saturnus\"},{\"value_id\":\"18\",\"value_name\":\"Kokkolan Capella\"},{\"value_id\":\"19\",\"value_name\":\"Kvadrantti\"},{\"value_id\":\"20\",\"value_name\":\"Lahden Ursa\"},{\"value_id\":\"21\",\"value_name\":\"Lakeuden Ursa\"},{\"value_id\":\"22\",\"value_name\":\"Lohjan Ursa\"},{\"value_id\":\"23\",\"value_name\":\"Lounais-H\u00e4meen Uranus\"},{\"value_id\":\"24\",\"value_name\":\"Mikkelin Ursa\"},{\"value_id\":\"25\",\"value_name\":\"Olympos\"},{\"value_id\":\"26\",\"value_name\":\"Ohcejoga Utsjoen Ursa\"},{\"value_id\":\"27\",\"value_name\":\"Oulun Arktos\"},{\"value_id\":\"28\",\"value_name\":\"Porin Karhunvartijat\"},{\"value_id\":\"29\",\"value_name\":\"Pohjan kruunu, Rovaniemi\"},{\"value_id\":\"30\",\"value_name\":\"Pollux, Aalto-yliopisto\"},{\"value_id\":\"31\",\"value_name\":\"Porvoon Ursa\"},{\"value_id\":\"32\",\"value_name\":\"Raahen Phobos\"},{\"value_id\":\"33\",\"value_name\":\"Riihim\u00e4en t\u00e4htit. yhdistys\"},{\"value_id\":\"34\",\"value_name\":\"Saarij\u00e4rven Halley-85\"},{\"value_id\":\"35\",\"value_name\":\"Salon seudun UrSalo\"},{\"value_id\":\"36\",\"value_name\":\"Sis\u00e4-Savon Ursa\"},{\"value_id\":\"37\",\"value_name\":\"Suomensel\u00e4n Pegasus\"},{\"value_id\":\"38\",\"value_name\":\"Tampereen Ursa\"},{\"value_id\":\"39\",\"value_name\":\"Turun Ursa\"},{\"value_id\":\"40\",\"value_name\":\"Ursa (Etel\u00e4-Suomi)\"},{\"value_id\":\"41\",\"value_name\":\"Ursa (Helsinki)\"},{\"value_id\":\"42\",\"value_name\":\"Ursa (It\u00e4-Suomi)\"},{\"value_id\":\"43\",\"value_name\":\"Ursa (L\u00e4nsi-Suomi)\"},{\"value_id\":\"44\",\"value_name\":\"Ursa (Pohjois-Suomi)\"},{\"value_id\":\"45\",\"value_name\":\"Vaasan Andromeda\"},{\"value_id\":\"46\",\"value_name\":\"Warkauden Kassiopeia\"},{\"value_id\":\"47\",\"value_name\":\"Ylivieskan club nebula\"},{\"value_id\":\"48\",\"value_name\":\"Kustavin t\u00e4htit. yhd. Toutatis\"}]},\"field_info\":\"<p><strong>T\u00e4h\u00e4n voit ilmoittaa<\/strong> t\u00e4htiharrastusyhdistyksen, jonka j\u00e4sen olet. Mik\u00e4li olet useamman yhdistyksen j\u00e4sen, pyyd\u00e4mme ett\u00e4 ilmoitat sen yhdistyksen, joka on havaintotoiminnassa sinulle merkityksellisin.\u00a0\u00a0<\/p><p><strong>Suomen suurin t\u00e4htiyhdistys<\/strong>, T\u00e4htitieteellinen yhdistys Ursa ry runsaalla 15 000 j\u00e4senell\u00e4\u00e4n on t\u00e4ss\u00e4 jaettu aluetiimeihin, jotka ovat \'Ursa (Etel\u00e4-Suomi)\', \'Ursa (Helsinki)\', \'Ursa (It\u00e4-Suomi)\', \'Ursa (L\u00e4nsi-Suomi)\' ja \'Ursa (Pohjois-Suomi)\'. Pohjois-Suomen tiimin alueella ovat Oulun ja Lapin l\u00e4\u00e4ni. Etel\u00e4-Suomen tiimin alueeseen kuuluvat my\u00f6s p\u00e4\u00e4kaupunkiseudun kunnat paitsi Helsinki.\u00a0\u00a0 \u00a0 \u00a0<\/p>\",\"field_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#observation_user_team\"},{\"field_label\":\"Tekniset tiedot\",\"field_id\":\"observation_equipment\",\"field_type\":\"text\",\"field_max_length\":\"2500\",\"field_mandatory\":\"0\",\"field_info\":\"<p><strong>T\u00e4h\u00e4n voit halutessasi<\/strong> eritell\u00e4 havainnossa k\u00e4ytt\u00e4m\u00e4si havaintov\u00e4lineen ja valokuvauksen tekniset tiedot. K\u00e4ytett\u00e4viss\u00e4 on 1200 kirjainmerkki\u00e4.<\/p><p><strong>Havaintov\u00e4lineen<\/strong> voi antaa esimerkiksi n\u00e4in: 127 mm peilikaukoputki, F1300 mm.<\/p><p><strong>Valokuvaustiedot<\/strong> voi antaa esimerkiksi n\u00e4in: Kameramerkki, 50 mm, f\/2,8, ISO 100.<\/p>\",\"field_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#observation_equipment\"},{\"field_label\":\"Toivon, ett\u00e4 havainnon ilmi\u00f6tunnistukset tarkistetaan ennen havainnon julkaisua\",\"field_id\":\"observation_request_opinion\",\"field_type\":\"checkbox\",\"field_mandatory\":\"0\",\"field_info\":\"<p>Laittamalla ruksin t\u00e4h\u00e4n pyyd\u00e4t, ett\u00e4 yll\u00e4pidon asiantuntijat tarkistavat havainnon ilmi\u00f6tunnistukset erityisen huolellisesti ja\/tai kriittisesti ennen havainnon julkaisua.<\/p><p>Mik\u00e4li tunnistuksissa havaitaan jotain ongelmallista, havainto ei mene julkaisuun ennen kuin yll\u00e4pito on korjannut tunnistukset ja\/tai sinuun on otettu yhteytt\u00e4. \u00a0\u00a0<\/p>\",\"field_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#observation_request_opinion\"}]},\"category\":{\"name\":\"revontuli\",\"title\":\"Revontulet\",\"sorting\":\"6\",\"specific\":[{\"field_label\":\"Revontulien kirkkaus\",\"field_id\":\"specific_kirkkaus\",\"field_type\":\"select\",\"field_mandatory\":\"0\",\"values\":{\"value\":[{\"value_id\":\"- valitse -\",\"value_name\":\"- valitse -\"},{\"value_id\":\"Erottuvat vain valokuvissa\",\"value_name\":\"Erottuvat vain valokuvissa\"},{\"value_id\":\"Hyvin himme\u00e4t revontulet\",\"value_name\":\"Hyvin himme\u00e4t revontulet\"},{\"value_id\":\"Himme\u00e4t revontulet\",\"value_name\":\"Himme\u00e4t revontulet\"},{\"value_id\":\"Kirkkaat revontulet\",\"value_name\":\"Kirkkaat revontulet\"},{\"value_id\":\"Hyvin kirkkaat revontulet\",\"value_name\":\"Hyvin kirkkaat revontulet\"}]},\"field_info\":\"<p><strong>Erottuvat vain valokuvissa<\/strong>. Kaikkein himmeimm\u00e4t revontulet eiv\u00e4t n\u00e4y paljain silmin, mutta erottuvat valokuvissa.<strong><br \/><\/strong><\/p><p><strong>Hyvin himme\u00e4t revontulet<\/strong> vastaavat Linnunradan kirkkautta.<\/p><p><strong>Himmeit\u00e4 revontulia<\/strong> voi verrata Kuun valaisemiin cirruspilviin.<\/p><p><strong>Kirkkaat revontulet<\/strong> ovat kirkkaudeltaan kuin Kuun valaisemia cumuluspilvi\u00e4.<\/p><p><strong>Hyvin kirkkaat<\/strong> revontulet heitt\u00e4v\u00e4t jopa varjoja.<\/p>\",\"field_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#specific_kirkkaus\"},{\"field_label\":\"Havaitut revontulimuodot\",\"field_id\":\"specific_revontulimuodot[]\",\"field_type\":\"checkbox\",\"field_mandatory\":\"0\",\"values\":{\"value\":[{\"value_id\":\"Kaari\",\"value_name\":\"Kaari\",\"value_info\":\"<p><strong>Kaari<\/strong> (englanniksi arc). Kaaret ovat leve\u00e4mpi\u00e4 kuin vy\u00f6t, eiv\u00e4tk\u00e4 poimuile yht\u00e4 voimakkaasti kuin ne. Kaaret eiv\u00e4t normaalisti ole j\u00e4rin kirkkaita eiv\u00e4tk\u00e4 aktiivisia.<\/p><p>Kaari lienee tavallisin revontulien esiintymismuoto. Usein revontulin\u00e4ytelm\u00e4 ei koko y\u00f6n aikana kehity matalalla pohjoistaivaalla kaartuvasta rauhallisesta kaaresta mihink\u00e4\u00e4n. Kaari on usein my\u00f6s aktiivisemmissa n\u00e4ytelmiss\u00e4 muoto, joka ensimm\u00e4iseksi ilmestyy, ja viimeiseksi katoaa.<\/p><p>Kaaren alareuna on tavallisesti ter\u00e4v\u00e4, mutta yl\u00e4reuna voi sulautua v\u00e4hitellen taustataivaaseen.\u00a0 Aktiivisuuden noustessa niihin normaalisti kehittyy s\u00e4teit\u00e4 ja poimuja, ja kaaret muuttuvat v\u00e4hitellen v\u00f6iksi.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Revontuli Atacan Ergin 400.jpg\' alt=\'\' \/><\/p><p>Kuvan poikki kulkee revontulikaari. Pystysuuntaiset muodot ovat s\u00e4teit\u00e4. Kuva Atacan Ergin.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Mauri Korpi revontulikaari 400.jpg\' alt=\'\' \/><\/p><p>Revontulikaari. Kuva Mauri Korpi.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Anna-Liisa Sarajarvi rauhallinen revontulikaari 400.jpg\' alt=\'\' \/><\/p><p>Revontulikaari. Kuva Anna-Liisa Saraj\u00e4rvi.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Simo Aikioniemi revontulikaari 400.jpg\' alt=\'\' \/><\/p><p>Revontulikaari. Kuva Simo Aikioniemi.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Matti Asumalahti revontuli 400.jpg\' alt=\'\' \/><\/p><p>Revontulikaari. Kuva Matti Asumalahti.<\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#kaari\"},{\"value_id\":\"Revontulikorona\",\"value_name\":\"Revontulikorona\",\"value_info\":\"<p><strong>Revontuli<\/strong><strong>korona<\/strong> (englanniksi corona) on magneettiseen taivaanlakeen eli zeniittiin, hieman havaitsijan zeniitin etel\u00e4puolelle muodostuva viuhkamainen, tavallisimmin s\u00e4teist\u00e4 tai v\u00f6ist\u00e4 koostuva rakenne. Korona on yleens\u00e4 revontulin\u00e4ytelm\u00e4n kauneinta antia. Se on kirkas ja aktiivinen, mutta toisaalta my\u00f6s lyhytaikainen.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Anna-Liisa Sarajarvi 400.jpg\' alt=\'\' \/><\/p><p>Revontulikorona. Kuva Anna-Liisa Saraj\u00e4rvi.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Merja Ruotsalainen revontuli 400.jpg\' alt=\'\' \/><\/p><p>Revontulikorona. Kuva Merja Ruotsalainen.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Markku Ruonala korona 400.jpg\' alt=\'\' \/><\/p><p>V\u00f6ist\u00e4 muodostunut korona. Kuva Markku Ruonala.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Tapio Koski revontuli 400.jpg\' alt=\'\' \/><\/p><p>Revontulikorona. Kuva Tapio Koski.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Ilmo Kemppainen revontuli 400.jpg\' alt=\'\' \/><\/p><p>Revontulikorona. Ilmo Kemppainen.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Lea Rahtu-Korpela revontuli 1 400.jpg\' alt=\'\' \/><\/p><p>Revontulikorona. Lea Rahtu-Korpela.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Teppo Komulainen 400.jpg\' alt=\'\' \/><\/p><p>Revontulikorona. Kuva Teppo Komulainen.<\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#revontulikorona\"},{\"value_id\":\"Vy\u00f6\",\"value_name\":\"Vy\u00f6\",\"value_info\":\"<p><strong>Vy\u00f6<\/strong> (englanniksi band). Vy\u00f6t ovat yleens\u00e4 kapeampia, alareunaltaan mutkittelevampia, kirkkaampia ja aktiivisempia kuin kaaret. Vy\u00f6t yleens\u00e4 kehittyv\u00e4t kaarista.<\/p><p>Vy\u00f6t voivat muodostaa J- ja U-muotoja, joskus t\u00e4ysi\u00e4 spiraalejakin. Korona voi my\u00f6s synty\u00e4 pelkist\u00e4 v\u00f6ist\u00e4. Vy\u00f6t ovat varsin tavallinen revontulimuoto.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Merja Ruotsalainen revontuli 2 400.jpg\' alt=\'\' \/><\/p><p>Revontulivy\u00f6. Kuva Merja Ruotsalainen.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Matias Takala vyo 400.jpg\' alt=\'\' \/><\/p><p>Revontulivy\u00f6. Kuva Matias Takala.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Lea Rahtu-Korpela revontuli 400.jpg\' alt=\'\' \/><\/p><p>Revontulivy\u00f6. Kuva Lea Rahtu-Korpela.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Satu Juvonen revontulivyo 400.jpg\' alt=\'\' \/><\/p><p>Revontuliv\u00f6it\u00e4. Kuva Satu Juvonen.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Lauri Koivuluoma revontuli 400.jpg\' alt=\'\' \/><\/p><p>Revontuliv\u00f6it\u00e4. Kuva Lauri Koivuluoma.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Matias Takala vyo 2 400.jpg\' alt=\'\' \/><\/p><p>Revontuliv\u00f6it\u00e4. Kuva Matias Takala. <\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#vy\"},{\"value_id\":\"S\u00e4teit\u00e4\",\"value_name\":\"S\u00e4teit\u00e4\",\"value_info\":\"<p><strong>S\u00e4de<\/strong> (englanniksi ray). S\u00e4teet ovat magneettikent\u00e4n voimaviivojen suuntaisia, eli varsin pystyj\u00e4, yleens\u00e4 suunnilleen vajaan asteen paksuisia valojuovia. S\u00e4teet voivat esiinty\u00e4 muiden muotojen yhteydess\u00e4, l\u00e4hinn\u00e4 kaarissa ja v\u00f6iss\u00e4, mutta my\u00f6s yksin\u00e4\u00e4n. Lyhyet s\u00e4teet ovat yleens\u00e4 kirkkaimpia alareunastaan, mutta himmenev\u00e4t nopeasti.<\/p><p>Pisimm\u00e4t, jopa l\u00e4hes horisontista zeniittiin ulottuvat s\u00e4teet ovat tavallisesti tasakirkkauksisia ja varsin rauhallisia, ja ne esiintyv\u00e4t lyhyemmist\u00e4 s\u00e4teist\u00e4 poiketen useimmiten muutamien s\u00e4teiden ryhmiss\u00e4 tai yksin\u00e4\u00e4n. S\u00e4teet ovat v\u00f6iden tapaan hyvin tyypillinen revontulimuoto.<\/p><p>Keinovalopilarit, jotka ovat j\u00e4\u00e4sumussa n\u00e4kyv\u00e4 haloilmi\u00f6, voivat toisinaan olla hyvin samann\u00e4k\u00f6isi\u00e4 kuin revontulien s\u00e4teet. Sekaannus on mahdollinen varsinkin silloin kun keinovalopilarit aiheuttavat lamput ovat kaukana n\u00e4kym\u00e4tt\u00f6miss\u00e4 rakennusten tai mets\u00e4n takana. Valokuvista ilmi\u00f6n luonne viimeist\u00e4\u00e4n selvi\u00e4\u00e4.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Tom Eklund sateita 400.jpg\' alt=\'\' \/><\/p><p>S\u00e4teit\u00e4. Kuva Tom Eklund.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Mika Puurula 400.jpg\' alt=\'\' \/><\/p><p>S\u00e4teit\u00e4. Kuva Mika Puurula.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Assi Mantyla 400.jpg\' alt=\'\' \/><\/p><p>Revontuliharsosta nousee kaksi s\u00e4dett\u00e4. Kuva Anssi M\u00e4ntyl\u00e4.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Janne Lauanne reonvuli 400.jpg\' alt=\'\' \/><\/p><p>Kaksi s\u00e4teist\u00e4 vy\u00f6t\u00e4. Kuva Jani Lauanne.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Mikko Peussa sateita 400.jpg\' alt=\'\' \/><\/p><p>S\u00e4teit\u00e4. Kuva Mikko Peussa.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Jussi alanenpaa 2 400.jpg\' alt=\'\' \/><\/p><p>S\u00e4teinen vy\u00f6 ja harsoa. Kuva Jussi Alanenp\u00e4\u00e4.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Aki Taavitsainen revontuli 400.jpg\' alt=\'\' \/><\/p><p>Kaksi s\u00e4dett\u00e4. Kuva Aki Taavitsainen.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Tom Eklund revontuli 400_1.jpg\' alt=\'\' \/><\/p><p>T\u00e4llaiset s\u00e4teet saattaisi olla mahdollista sekoittaa keinovalopilareihin. Vertaa kuvaan alla. Kuva Tom Eklund.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Sami Jumppanen keinovalopilarit 400.jpg\' alt=\'\' \/><\/p><p>T\u00e4ss\u00e4 kuvassa ei ole revontulia, vaan kaikki valopylv\u00e4\u00e4t - my\u00f6s vasemmalla ylh\u00e4\u00e4ll\u00e4 n\u00e4kyv\u00e4 laaja ja diffuusi pylv\u00e4s - ovat j\u00e4\u00e4sumuun syntyneita keinovalopilareita. Kuva Sami Jumppanen.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Katariina Roiha revontuli 1 400.jpg\' alt=\'\' \/><\/p><p>Revontulia ja keinovalopilareita. Kaikki s\u00e4dem\u00e4iset muodot ylemm\u00e4ss\u00e4 kuvassa ovat luultavastikin keinovalopilareita, jotka sattuvat sopivasti p\u00e4\u00e4llekk\u00e4in revontulivy\u00f6n kanssa. Alemmassa kuvassa revontulivy\u00f6 on siirtynyt eik\u00e4 ole p\u00e4\u00e4llekk\u00e4in oranssien lamppujen tuottamien pilareiden kanssa. Revontulissa ei oranssia esiinny. Kuva Katariina Roiha.\u00a0<\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#steit\"},{\"value_id\":\"Harso\",\"value_name\":\"Harso\",\"value_info\":\"<p><strong>H<\/strong><strong>arso<\/strong> (englanniksi veil). Harso on mit\u00e4\u00e4nsanomattomin revontulimuoto. Se peitt\u00e4\u00e4 tavallisesti homogeeniseen himme\u00e4\u00e4n hehkuunsa laajahkon alueen taivasta kerralla. Useimmiten harson n\u00e4kee y\u00f6n revontulimaksimin j\u00e4lkeisess\u00e4 rauhallisemmassa vaiheessa muiden muotojen taustana. Harso voi esiinty\u00e4 my\u00f6s yksin\u00e4\u00e4n, jolloin sen varma tunnistaminen revontuleksi on melko vaikeaa, varsinkin valosaasteisella havaintopaikalla.<\/p><p>Samantapaisen valohehkun voi aiheuttaa my\u00f6s ilmassa leijuva kosteus, savu, tai hyvin ohut pilvikerros, jotka heijastavat niihin osunutta valoa. Pilvi\u00e4 voi kuitenkin k\u00e4ytt\u00e4\u00e4 my\u00f6s harson tunnistamiseen, sill\u00e4 varsinkin jos keski- tai yl\u00e4pilvi n\u00e4kyy tummana vaaleampaa taustaa vasten, on silloin hyvin todenn\u00e4k\u00f6isesti kyseess\u00e4 revontuliharso, mik\u00e4li taustataivaan vaaleus ei johdu nousevasta tai laskeneesta Kuusta tai Auringosta.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Esa Palmi harso 400.jpg\' alt=\'\' \/><\/p><p>Harsoa ja s\u00e4teit\u00e4. Kuva Esa Palmi.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Esa Palmi harso 2 400.jpg\' alt=\'\' \/><\/p><p>Vy\u00f6 ja harsoa. Kuva Esa Palmi.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Marko Mikkila 400_2.jpg\' alt=\'\' \/><\/p><p>Punaista revontuliharsoa. Kuva Marko Mikkil\u00e4.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Milla Myllymaa harso 400.jpg\' alt=\'\' \/><\/p><p>Harsoa. Kuva Milla Myllymaa.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Jaakko Hatanpaa 400_1.jpg\' alt=\'\' \/><\/p><p>Revontuliharso joka vaihtaa v\u00e4ri\u00e4\u00e4n alaosan vihre\u00e4st\u00e4 purppuran kautta yl\u00e4osan siniseen. Kuva Jaakko Hatanp\u00e4\u00e4.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Jarmo Leskinen harso 2 400.jpg\' alt=\'\' \/><\/p><p>Himme\u00e4\u00e4 vihre\u00e4\u00e4 harsoa. Kuva Jarmo Leskinen.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Jussi alanenpaa 2 400_1.jpg\' alt=\'\' \/><\/p><p>S\u00e4teinen revontulivy\u00f6 jota ymp\u00e4r\u00f6i harso. Kuva Jussi Alanenp\u00e4\u00e4.<\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#harso\"},{\"value_id\":\"Tunnistamaton\",\"value_name\":\"Tunnistamaton\",\"value_info\":\"<p><strong>Tunnistamaton<\/strong><strong> muoto <\/strong>(englanniksi form not identifiable). Joskus revontulia joutuu havaitsemaan niin huonoissa oloissa, ettei muodon varma tunnistaminen ole mahdollista, vaikka esimerkiksi rakenteen ja tilan voisi havaitakin. T\u00e4llainen tilanne voi olla seurausta esimerkiksi vaaleasta taustataivaasta, pilvisyydest\u00e4, tai peitteisest\u00e4 horisontista.<\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#tunnistamaton\"},{\"value_id\":\"L\u00e4iski\u00e4\",\"value_name\":\"L\u00e4iski\u00e4\",\"value_info\":\"<p><strong> L\u00e4isk\u00e4 <\/strong>(englanniksi patch). L\u00e4isk\u00e4t ovat reunoiltaan ep\u00e4m\u00e4\u00e4r\u00e4isi\u00e4, siis diffuuseja, pilvim\u00e4isi\u00e4 valoisia l\u00e4ikki\u00e4. L\u00e4isk\u00e4t ovat l\u00e4pimitaltaan kymmenen asteen suuruusluokkaa. Sykkiminen on l\u00e4iskiss\u00e4 pikemminkin s\u00e4\u00e4nt\u00f6 kuin poikkeus. L\u00e4isk\u00e4t, kuten sykkiminenkin, esiintyv\u00e4t tavallisesti kovemman luokan n\u00e4ytelm\u00e4n my\u00f6h\u00e4isiss\u00e4 vaiheissa. Sykkivi\u00e4 l\u00e4iski\u00e4 voi t\u00e4llaisessa tapauksessa n\u00e4ky\u00e4 koko loppuy\u00f6n.<\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#liski\"}]},\"field_info\":[],\"field_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#specific_revontulimuodot\"},{\"field_label\":\"V\u00e4rit paljain silmin ja muita piirteit\u00e4\",\"field_id\":\"specific_muita_erityispiirteit\u00e4[]\",\"field_type\":\"checkbox\",\"field_mandatory\":\"0\",\"values\":{\"value\":[{\"value_id\":\"Valkoisia revontulia\",\"value_name\":\"Valkoisia revontulia\",\"value_info\":\"<p><strong>Paljain silmin valkoinen v\u00e4ri<\/strong> n\u00e4kyy useimmiten himmeiss\u00e4 n\u00e4ytelmiss\u00e4, kun silm\u00e4 ei kykene erottamaan mit\u00e4\u00e4n varsinaista v\u00e4ri\u00e4. Harvoin kirkkaissa n\u00e4ytelmiss\u00e4 valkoinen v\u00e4ri voi my\u00f6s synty\u00e4 sopivista vihre\u00e4n, punaisen ja sinisen yhdistelmist\u00e4.<\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#valkoisia-revontulia\"},{\"value_id\":\"Vihreit\u00e4 revontulia\",\"value_name\":\"Vihreit\u00e4 revontulia\",\"value_info\":\"<p><strong>Paljain silmin havaittu vihre\u00e4<\/strong> on revontulten v\u00e4reist\u00e4 yleisimpi\u00e4. Vihre\u00e4 v\u00e4ri syntyy atomaarisesta hapesta.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Lea Rahtu Korpela revontuli 400.jpg\' alt=\'\' \/><\/p><p>Vihreit\u00e4 revontulia. Lea Rahtu-Korpela.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Voitto Pitkanen499.jpg\' alt=\'\' \/><\/p><p>Vihreit\u00e4 revontulia, jotka ovat hiukan ohuen pilviharson samentamia. Kuva Voitto Pitk\u00e4nen. <\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Atacan Ergin revontule 400.jpg\' alt=\'\' \/><\/p><p>Vihreit\u00e4 revontulia. Kuva Atacan Ergin.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Juha ojanpera revontulivpoita 34 400.jpg\' alt=\'\' \/><\/p><p>Vihreit\u00e4 revontulia. Kuva Juha Ojanper\u00e4. <\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#vihreit-revontulia\"},{\"value_id\":\"Muotojen alaosat punaiset\",\"value_name\":\"Muotojen alaosat punaiset\",\"value_info\":\"<p><strong>Paljain silmin punainen alareuna.<\/strong> Aktiivisuuttaan kehitteleviin tavallisesti vihre\u00e4ns\u00e4vyisiin v\u00f6ihin syntyy melko usein kapea punainen alareuna. T\u00e4m\u00e4 on yleisin punaisen v\u00e4rin ilmenemismuoto, ja per\u00e4isin molekyylisest\u00e4 typest\u00e4.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Ilmo Kemppainen 400.jpg\' alt=\'\' \/><\/p><p>Alaosastaan purppuranpunainen revontulivy\u00f6. Kuva Ilmo Kemppainen.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Tero Ohranen 400.jpg\' alt=\'\' \/><\/p><p>Matalalla oleva kirkkain revontulivy\u00f6 on v\u00e4rj\u00e4ytynyt alaosastaan punaiseksi. Kuva Tero Ohranen.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Merja Ruotsalainen revontuli 2 400_1.jpg\' alt=\'\' \/><\/p><p>Kapea purppurapunerrus s\u00e4vytt\u00e4\u00e4 t\u00e4m\u00e4n revontulivy\u00f6n alaosaa. Kuva Merja Ruotsalainen. <\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Panu Lahtinen x 400.jpg\' alt=\'\' \/><\/p><p>Alaosastaan purppuranpunainen vy\u00f6. Kuva Panu Lahtinen. <\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#muotojen-alaosat-punaiset\"},{\"value_id\":\"Muotojen yl\u00e4osat punaiset\",\"value_name\":\"Muotojen yl\u00e4osat punaiset\",\"value_info\":\"<p><strong>Yl\u00e4osiltaan paljain silmin punaisia revontulia<\/strong> havaitaan useimmiten v\u00f6iss\u00e4 ja pitkiss\u00e4 s\u00e4teiss\u00e4. T\u00e4ll\u00f6in alaosat ovat tyypillisesti vihreit\u00e4. Jos ylemm\u00e4t osat ovat auringonpaisteessa, voi punainen olla vihre\u00e4\u00e4 voimakkaampi. T\u00e4m\u00e4 punas\u00e4vy on per\u00e4isin atomaarisen hapen viritystilan purkautumisesta.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Karri Pasanen punainen 400_1.jpg\' alt=\'\' \/><\/p><p>Yl\u00e4osaa kohti punertuvia revontulia. Kuva Karri Pasanen. <\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Aki Taavitsainen punainen 400_1.jpg\' alt=\'\' \/><\/p><p>Punaisia s\u00e4teit\u00e4. Kuva Tom Eklund. <\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Harry Lehto revontuli 400 x_1.jpg\' alt=\'\' \/><\/p><p>Punaista revontuliharsoa ja -s\u00e4teit\u00e4. Kuva Harry Lehto.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Simo Aikioniemi x 400.jpg\' alt=\'\' \/><\/p><p>Yl\u00e4osasta punainen revontulivy\u00f6. Kuva Simo Aikioniemi.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Simo Aikioniemi revontulikaari 400_1.jpg\' alt=\'\' \/><\/p><p>Punerrusta revontulikaaren yll\u00e4. Kuva Simo Aikioniemi.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Marko Mikkila 400_1.jpg\' alt=\'\' \/><\/p><p>Punaista revontuliharsoa. Kuva Marko Mikkil\u00e4.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Tom Eklund revontuli 2 400.jpg\' alt=\'\' \/><\/p><p>Punaista v\u00e4ri\u00e4 revontulten yl\u00e4osassa. Kuva Tom Eklund.<\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#muotojen-ylosat-punaiset\"},{\"value_id\":\"Kokonaan punaisia revontulia\",\"value_name\":\"Kokonaan punaisia revontulia\",\"value_info\":\"<p><strong>Kauttaaltaan punaisia revontulia paljain silmin. <\/strong> Kauttaaltaan tummahkon punainen revontuli on hyvin harvinainen ja silmiinpist\u00e4v\u00e4n komea ilmestys. My\u00f6s t\u00e4m\u00e4 ilmi\u00f6 johtuu er\u00e4\u00e4n atomaarisen hapen viritystilan purkautumisesta.<\/p><p>\u00a0<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Tobias Billings 400.jpg\' alt=\'\' \/><\/p><p>Kauttaaltaan punainen revontuli. Kuva Tobias Billings.<\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#kokonaan-punaisia-revontulia\"},{\"value_id\":\"Keltaisia revontulia\",\"value_name\":\"Keltaisia revontulia\",\"value_info\":\"<p><strong>Paljain silmin keltainen revontuliv\u00e4ri<\/strong> on harvinaisuus, joka voi synty\u00e4 kirkkaissa n\u00e4ytelmiss\u00e4 sopivista vihre\u00e4n, punaisen ja sinisen yhdistelmist\u00e4.<\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#keltaisia-revontulia\"},{\"value_id\":\"Sinisi\u00e4 revontulia\",\"value_name\":\"Sinisi\u00e4 revontulia\",\"value_info\":\"<p><strong>Paljain silmin sinisi\u00e4 s\u00e4vyj\u00e4<\/strong> p\u00e4\u00e4see n\u00e4kem\u00e4\u00e4n vain kaikkein parhaimmissa revontulin\u00e4ytelmiss\u00e4 maksimin vaiheilla, tai sen j\u00e4lkeen. Useimmiten sinisen kuten sinipunaisenkin s\u00e4vyt ovat havaittavissa revontulten ylimmiss\u00e4 osissa, ja ne n\u00e4kyv\u00e4t voimakkaammin, jos ne ovat auringonpaisteessa. Sininen v\u00e4ri on per\u00e4isin ionisoituneesta typpimolekyylist\u00e4.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Jorma Mantyla 2 400.jpg\' alt=\'\' \/><\/p><p>Voimakkaan sinist\u00e4 v\u00e4ri\u00e4 revontulissa. Kuva Jorma M\u00e4ntyl\u00e4.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Jorma Mantyla 400.jpg\' alt=\'\' \/><\/p><p>Sininen on yksi t\u00e4m\u00e4n v\u00e4rikirjoltaan poikkeuksellisen monipuolisen revontulin\u00e4ytelm\u00e4n v\u00e4reist\u00e4. Kuva Jorma M\u00e4ntyl\u00e4.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Tom Eklund 400.jpg\' alt=\'\' \/><\/p><p>Yl\u00e4osastaan sinisi\u00e4 s\u00e4teit\u00e4. Kuva Tom Eklund.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Markku Ruonala 400.jpg\' alt=\'\' \/><\/p><p>Yl\u00e4osasta sinisi\u00e4 revontulis\u00e4teit\u00e4. Kuva Markku Ruonala.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Jaakko Hatanpaa 400.jpg\' alt=\'\' \/><\/p><p>Yl\u00e4osasta sinisi\u00e4 s\u00e4teit\u00e4. Kuva Jaakko Hatanp\u00e4\u00e4.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Tapio Koski revontuli 400_1.jpg\' alt=\'\' \/><\/p><p>Osin sininen revontulikorona. Kuva Tapio Koski.<\/p><p>\u00a0<\/p><p><img src=\'http:\/\/www.taivaanvahti.fi\/js\/AjaxFileManagerTinymce3.4\/uploaded\/Jaakko Hatanpaa 400_2.jpg\' alt=\'\' \/><\/p><p>Revontuliharsoa jonka yl\u00e4osa on heikosti sininen. Kuva Jaakko Hatanp\u00e4\u00e4.<\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#sinisi-revontulia\"},{\"value_id\":\"Sykkivi\u00e4 revontulia (pulsating)\",\"value_name\":\"Sykkivi\u00e4 revontulia (pulsating)\",\"value_info\":\"<p><strong>Sykkivi\u00e4 revontulia<\/strong> (englanniksi pulsating). Sykkivien revontulien kirkkaus vaihtelee useimmiten rytmikk\u00e4\u00e4sti jaksolla, joka on nopeimmillaan vain sekunnin osia, mutta voi olla my\u00f6s minuutteja. Sykkimist\u00e4 esiintyy yleens\u00e4 vain laadukkaammissa n\u00e4ytelmiss\u00e4 varsinkin niiden loppupuolella. Tosin sykkimist\u00e4 voi seurata viel\u00e4 uusi purkaus. Toisinaan kirkkauden vaihtelu on samassa vaiheessa koko muodossa, jolloin koko muoto \'syttyy ja sammuu\' yht\u00e4 aikaa. Sykkimist\u00e4 tavataan my\u00f6s kaarissa ja v\u00f6iss\u00e4, mutta ennen kaikkea l\u00e4iskiss\u00e4.<\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#sykkivi-revontulia-pulsating\"},{\"value_id\":\"Loimuavia revontulia (flaming)\",\"value_name\":\"Loimuavia revontulia (flaming)\",\"value_info\":\"<p><strong>Loimuava<\/strong> (englanniksi flaming). T\u00e4m\u00e4 revontulien harvinainen alaluokka ei tarkoita niink\u00e4\u00e4n yksitt\u00e4ist\u00e4 muotoa, vaan suurta aluetta taivaalla. Loimuavissa revontulissa taivaalle ilmestyy yl\u00f6sp\u00e4in magneettista zeniitti\u00e4 kohti pyyhkivi\u00e4 tavallisesti kirkkaahkoja aaltoja. Hyvin harvoin aallot voivat pyyhki\u00e4 alasp\u00e4in. Loimuamisen yhteydess\u00e4 raportoidaan tavallisesti v\u00f6it\u00e4, harvemmin l\u00e4iski\u00e4.<\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#loimuavia-revontulia-flaming\"},{\"value_id\":\"Lepattavia revontulia (flickering)\",\"value_name\":\"Lepattavia revontulia (flickering)\",\"value_info\":\"<p><strong>Lepattava (flickering).<\/strong> T\u00e4m\u00e4 harvinainen alaluokka tarkoittaa tilannetta, jossa revontulissa tapahtuu kirkkauden ep\u00e4s\u00e4\u00e4nn\u00f6llisi\u00e4 vaihteluja, kuten lepattavissa liekeiss\u00e4.<\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#lepattavia-revontulia-flickering\"},{\"value_id\":\"Liehuvia revontulia (streaming)\",\"value_name\":\"Liehuvia revontulia (streaming)\",\"value_info\":\"<p><strong>Liehuva (streaming).<\/strong> Liehuvissa revontulissa esiintyy homogeenisten muotojen vaakasuoraa ulottuvuutta pitkin nopeasti etenevi\u00e4 kirkkauden ep\u00e4s\u00e4\u00e4nn\u00f6llisi\u00e4 vaihteluja.<\/p>\",\"value_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#liehuvia-revontulia-streaming\"}]},\"field_info\":\"<p><strong>Valitse alla<\/strong> rastilla sopivat kohdat, mik\u00e4li jokin n\u00e4ist\u00e4 v\u00e4reist\u00e4 tai erityispiirteist\u00e4 oli havaittavissa taivaalla. <\/p>\",\"field_info_url\":\"http:\/\/www.taivaanvahti.fi\/observations\/report\/cat\/revontuli#specific_muita_erityispiirteit\"}]}}");

	var $e = this,
		observation = conf.result.observation,
		category    = conf.result.category,
		fieldData   = (observation.field && observation.field.length) ?
			observation.field : [],

		specData    = (category.specific && category.specific.length) ?
			category.specific : [];

	console.log(category['name']);
    $e.attr('data-category',category['name']);

	for (var i = 0; i < specData.length; i++) {
		specData[i].field_hidden = true;
	}

	fieldData = fieldData.concat(specData);

	var renderedFields = ['<fieldset>'];

	for (var i = 0; i < fieldData.length; i++) {
		var datum = fieldData[i];

		var Constructor = (constructorMapper.hasOwnProperty(datum['field_type'])) ?
			constructorMapper[datum['field_type']] : Field;

		var field = new Constructor(datum);

		var render = (field.isHidden()) ? [
			'<div class="hidden-field">',
			field.render(),
			'</div>'
		].join('') : field.render();
		
		renderedFields.push(render);
		
	}

	renderedFields.push([
		'<div class="form-group submits">',
			'<div class="col-xs-6">',
				'<input type="button" class="btn btn-default btn-block" id="nappula" value="Lähetä" onclick="myFunction()">',
			'</div>',
			'<div class="col-xs-6">',
				'<input type="button" class="btn btn-default btn-block" id="nappula2" value="Kuva" onclick="getImageBase64()">',
			'<div>',
		'</div>',
		'</fieldset>'
	].join(''));

	console.log($e);

	$e.html(renderedFields.join(''));

};

$.fn.serializeObject = function() {
	console.log('paap');
	var request = {};
	request.action="ObservationAddRequest";
    var observation = [];
    var a = $(":input").serializeArray();
	console.log(this);
	console.log(a);
    $.each(a, function() {	
		var item = {}
		var item2 = {}
		item2.field_id = this.name || '';
		item2.field_value = this.value || '';
		item["field"]=item2;
		observation.push(item);
    });
	
	observation.push({
		"category":{
			"field":{
				"field_id": "category_id",
				"field_value": this.attr('data-category')
			}
		}
	});
	
    request.observation = observation;
	request.source = "SpaceApps2014";
	var o = {};
	o.request =request;
	console.log(JSON.stringify(o));
	
	return o;
};

})(window.jQuery);
